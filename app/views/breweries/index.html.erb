<h1>Listing breweries</h1>

<% cache "brewerylist-#{@order}", skip_digest: true do %>
    <p> Number of breweries: <%= @breweries.count %> </p>
    <table class="table table-hover">
      <thead>
      <tr>
        <th> <%= link_to 'Name', breweries_path(order:"name") %> </th>
        <th> <%= link_to 'Year', breweries_path(order:"year") %> </th>
      </tr>
      </thead>

      <p id="notice"><%= notice %></p>

      <tbody>
        <% @breweries.each do |brewery| %>
          <tr>
            <td><%= link_to brewery.name, brewery %></td>
            <td><%= brewery.year %></td>
            <td><%= (link_to 'Edit', edit_brewery_path(brewery), class:"btn btn-primary") unless current_user.nil? %></td>
            <td><%= (link_to 'Destroy', brewery, method: :delete, data: { confirm: 'Are you sure?' }, class:"btn btn-danger") unless current_user.nil? %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
<% end %>
<br>

<%= link_to('New Brewery', new_brewery_path, class:"btn btn-primary") unless current_user.nil? %>
